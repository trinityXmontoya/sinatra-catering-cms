<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header">Testimonials</h1>
  </div><!-- /.col-lg-12 -->
</div><!-- /.row -->

<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading"></div><!-- /.panel-heading -->
      <div class="panel-body">
        <div class="tab-content">
          <div class="tab-pane fade in active" id="list">
            <div class="table-responsive">
              <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Event</th>
                    <th>Comment</th>
                    <th>Approved?</th>
                  </tr>
                </thead>
                <tbody>
                  <script>
                    $(document).ready( function(){
                      $('input[name="approved_status"]').on('click', function(){
                        var id = this.getAttribute('data-id')
                        var value = this.value
                        $.ajax({
                            url: "/admin/testimonial/"+id,
                            type: "PUT",
                            data: { value: value }
                          })
                        })
                      })
                  </script>
                <% @testimonials.each do |t| %>
                  <tr class="odd gradeX">
                    <td><%= t.name %></td>
                    <td><%= t.event %></td>
                    <td><%= t.comment %></td>
                    <td><%= check_box_tag :approved ,{checked: t.approved, value: t.approved, name: "approved_status", :"data-id" => t.id} %></td>
                    <td class="center">
                      <%= button_to 'Delete', url("/admin/#{t.class}/#{t.id}"), :method => :delete %>
                    </td>
                    <%#= partial :'admin/edit', locals: {:model => cat} %>
                  </tr>
                <% end %>
                </tbody>
              </table>
            </div><!-- /.table-responsive -->
          </div><!-- /#list -->
        </div><!-- /.tab-content -->
      </div><!-- /.panel-body -->
    </div><!-- /.panel -->
  </div><!-- /.col-lg-12 -->
</div><!-- /.row -->
